
---
title: "Human Activity Recognition Using Smartphones Dataset Version 1.0"
author: "Charles Hale"
date: "Jan 20, 2015"
output: html_document
---

<http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones> looks at 30 volunteers who performed six activities ranging from walking to laying all while wearing a smartphone on the waist. The data was collected to demonstrate concepts of a clean dataset.  To analysis the data set run the R script `run_analysis.R` from source.
```{r}
source("run_analysis.R")
```
When the `run_analysis.R` is sourced, a series of messages are displayed, noting the downloading and reading of data files.   The script will also pause to review the combined training and test data set.  `Press return to continue` will complete the run.

The data was downloaded, unzipped and separately read into variables using a template function and matrix data structures.  
```{r}
file_URL <- "https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip "
download.file(file_URL, destfile = "./data/HARdatset.zip", method = "curl")
unzip(zipfile = dest_file, exdir = path.expand("./data"))

```
Next, techniques were used to change the activity names and recode the test and training labels to match their respected class.  Column names were also given descriptive names.  Two separate data set were developed, where each data set included numerical data, recoded names and subject data.  The data sets was then combined by row to make a complete data set. 

```{r}
# wide format data set
dataset <- rbind(testdataset, traindataset)
```
The mean and standard deviation for each measurement were selected and integrated into distinct data set.
```{r}
# combine mean, standard deviation, subjects,and activity columns
dataset_mmt <- cbind(ds_tbl[, c(2,3)], dataset_mean, dataset_std)
```



fix_missing <- function(x) {
  #browser()
  x[x == 5] <- "standing"
  x
}
fix_missing <- function(x) {
  #browser()
  
  x[x == 5] <- "standing"
  
}

missing_fixer <- function(na_value, v2) {
  function(x) {
    browser()
  i <- which(as.numeric(x) == na_value)
    i[i == na_value] <- v2
    i
  }
}

fix_mis1 <- missing_fixer(5, v2="standing")
fix_mis2 <- missing_fixer(4, "sitting")
activity$name <- lapply(activity$class, fix_mis1)
activity$name <- lapply(activity$class, fix_mis2)
activity$name <- lapply(activity$class, fix_missing)
